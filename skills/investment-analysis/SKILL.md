---
name: investment-analysis
description: 投资分析工具，用于公司分析、行业研究和概念池管理。当用户提到股票代码、公司名称、行业分析时自动触发。生成标准化的分析报告并保存到docs目录。
---

# 投资分析 Skill

> 系统化的公司分析、行业研究和概念池管理工具

## 功能概览

本skill提供三大核心功能：

1. **公司分析** - 生成标准化的个股分析报告
2. **行业分析** - 生成产业链/细分行业研究报告  
3. **概念池更新** - 基于分析结果更新概念股票池体系

---

## 一、公司分析

### 触发场景

当用户：
- 明确要求分析某公司/股票（"分析科大讯飞"、"研究比亚迪"）
- 提到股票代码（002230、600519、000001等）
- 询问公司情况（"科大讯飞怎么样"、"这只股票如何"）

**自动识别策略**：
```
用户提到公司/股票 → 询问是否需要分析
"我注意到你提到了[公司名称]（[股票代码]），是否需要生成公司分析报告？
分析将包括：主营业务、财务数据、行业地位、投资亮点等"
[是] / [否]
```

### 分析工作流

#### 步骤1: 信息收集（30-40分钟）

使用Web搜索收集以下信息：

**官方信息**（最高权重）：
- 公司官网：主营业务、产品线、技术实力
- 巨潮资讯网：最新年报、季报、公告
- 交易所网站：重大事项、投资者关系

**搜索关键词**：
```
- "[公司名称] 官网"
- "[股票代码] 年报 2025"
- "[公司名称] 主营业务"
- "[公司名称] 财务数据 东方财富"
- "[公司名称] 研报 2025"
```

**专业研究**（高权重）：
- 券商研报：行业地位分析、估值模型
- 行业报告：竞争格局、技术趋势
- 专业媒体：公司动态、重大事件

**市场数据**（参考）：
- 东方财富/同花顺：实时行情、概念归属
- Wind/Choice：行业分类、财务指标

#### 步骤2: 生成报告（使用模板）

使用 `templates/company-template.md` 生成标准化报告，包含：

1. **公司简介**（表格形式）
   - 证券代码、上市板块
   - 成立时间、上市时间
   - 所属行业、市场地位

2. **主营业务**
   - 核心产品/服务
   - 技术路线
   - 业务模式

3. **财务与业绩**
   - 最新年报数据（营收、净利润、毛利率等）
   - 最新季报数据
   - 同比/环比变化分析

4. **行业地位与产业链定位**
   - 产业链位置
   - 市占率/排名
   - 竞争优势

5. **投资亮点**
   - 核心竞争力
   - 成长驱动因素
   - 政策/行业红利

6. **风险提示**
   - 业绩风险
   - 竞争风险
   - 估值风险

7. **业绩预期与估值**
   - 未来1-2年业绩预期
   - PE/PB估值水平
   - 关键观察指标

#### 步骤3: 保存文档

保存到：`docs/[行业名称]/[细分领域]/[公司名称].md`（大型行业需要细分）
或：`docs/[行业名称]/[公司名称].md`（小型行业可直接放在行业目录下）

**目录结构**：
```
docs/
├── 有色金属/
│   ├── 00_行业概览.md
│   ├── 黄金/
│   │   ├── 紫金矿业.md
│   │   └── 山东黄金.md
│   ├── 稀土/
│   │   ├── 北方稀土.md
│   │   └── 广晟有色.md
│   └── 铜/
│       └── 江西铜业.md
├── 化工/
│   ├── 00_行业概览.md
│   ├── 农药/（20家）
│   ├── 化纤/（15家）
│   ├── 电子化学品/（14家）
│   └── ...（共20个细分领域）
└── 半导体/
    ├── 设备/
    │   ├── 00_行业概览.md
    │   └── 北方华创.md
    └── 设计/
```

**命名规则**：
- 行业报告：`00_行业概览.md`（00开头保证排序在最前）
- 公司文件：使用公司简称（如"康强电子"而非"宁波康强电子股份有限公司"）
- 细分领域目录：大型行业（100+公司）必须按细分领域组织，便于检索
- 避免特殊字符
- 更新日期标注在文档头部

---

## 二、行业分析

### 触发场景

当用户：
- 明确要求分析行业（"分析半导体设备行业"）
- 询问产业链（"光伏产业链是怎样的"）
- 讨论技术趋势（"CPO技术现状如何"）

### 分析工作流

#### 步骤1: 确认范围

确定：
- 行业/细分领域名称
- 产业链归属（半导体、新能源、化工等）
- 分析深度（概览 vs 深度研究）

#### 步骤2: 信息收集（40-60分钟）

**搜索关键词**：
```
- "[行业名称] 市场规模 2025"
- "[行业名称] 产业链 分析"
- "[行业名称] 龙头企业"
- "[行业名称] 国产替代 进展"
- "[行业名称] 投资逻辑"
- "[行业名称] 技术路线"
```

**扩展搜索策略**（针对公司列举）：
```
基础搜索：
- "[行业名称] A股上市公司 完整名单 2026"
- "[行业名称] 上市公司 产能排名 市占率"
- "[行业名称] 细分领域 龙头企业"
- "同花顺 东方财富 [行业名称] 板块成分股"
- "[行业名称] 第一梯队 第二梯队 企业"

细分领域穷举（关键！）：
针对每个主要细分领域，逐一搜索上市公司名单
- "[细分领域1] A股上市公司"（如："铜矿开采 A股上市公司"）
- "[细分领域2] A股上市公司"（如:"铜冶炼 A股上市公司"）
- "[细分领域3] A股上市公司"（如:"稀土 A股上市公司"）
- "[细分领域4] A股上市公司"（如:"锂业 A股上市公司"）
- "[细分领域5] A股上市公司"（如:"钴镍 A股上市公司"）
- "[细分领域6] A股上市公司"（如:"钨业 A股上市公司"）
- "[细分领域7] A股上市公司"（如:"钼业 A股上市公司"）
- 以此类推,确保每个细分领域都被覆盖

验证与去重：
- 交叉对比多个搜索结果
- 去除重复公司
- 确认公司主营业务与行业相关性
```

**质量检查清单**（替代固定数量目标）：

✅ **细分领域完整性**
- [ ] 每个主要细分领域至少有1-2家代表公司
- [ ] 龙头细分领域（营收占比>30%）至少有3-5家公司
- [ ] 新兴细分领域至少有1家先行者

✅ **梯队完整性**  
- [ ] 第一梯队：行业前3-5名龙头企业
- [ ] 第二梯队：细分龙头、区域龙头、快速成长企业
- [ ] 第三梯队：新进入者、转型企业、技术突破企业

✅ **市值覆盖度**
- [ ] 行业市值前10的公司是否都包含？
- [ ] 如有遗漏，是否有合理原因（主营不相关、ST股等）

✅ **产业链完整性**
- [ ] 上游（资源/原材料）有代表公司
- [ ] 中游（制造/加工）有代表公司  
- [ ] 下游（应用/集成）有代表公司

✅ **交叉验证**
- [ ] 对比Wind/同花顺/东方财富的行业板块成分股
- [ ] 对比券商研报中提到的重点公司
- [ ] 搜索"[行业]被低估的公司"发现遗珠

**默认分析策略**：**全景扫描 + 拐点捕捉型龙头战法**

当用户提出"分析xx行业"时，默认采用全景扫描策略：

**目标公司数量**（按行业规模）：
- 小型行业（如CPO、连接器）：15-25家
- 中型行业（如半导体设备、光伏）：30-50家
- **大型行业（如化工、有色、机械、建材）：100-150家** ⭐推荐

**全景扫描要求**：
- 覆盖所有主要细分领域（每个细分至少1-2家代表）
- 包含细分冠军、拐点受益标的，不仅限于市值龙头
- 按细分领域组织，采用批次化并行分析
- 使用fast model加速处理

**快速模式**（可选，用户明确要求"快速了解"）：
- 仅分析行业前10-20家龙头
- 标注为"快速分析版"
- 后续可扩展为全景版

**信息来源**：
- 行业协会/政府网站：行业规模、政策文件
- 券商研报：产业链分析、竞争格局
- 专业媒体（36氪、钛媒体）：行业趋势、新技术
- Wind/Choice：行业分类、上市公司数据
- 东方财富/同花顺：板块成分股、公司排名

#### 步骤3: 生成报告（使用模板）

使用 `templates/industry-template.md` 生成报告，包含：

1. **行业定义与范围**
   - 核心概念解释
   - 产业链位置
   - 细分领域

2. **市场规模与增长趋势**
   - 全球市场规模
   - 中国市场规模
   - 增长驱动因素

3. **竞争格局**
   - 全球龙头企业
   - 国内龙头企业
   - 市占率分布

4. **产业链结构**
   - 上中下游关系
   - 关键环节
   - 产业链图示

5. **国产替代进展**（如适用）
   - 国产化率
   - 技术差距
   - 突破方向

6. **A股投资标的全景**
   - **三层级分类**:
     - 第一梯队：行业龙头（5-7家）
     - 第二梯队：重要企业（8-12家）
     - 第三梯队：潜力企业（5-10家）
   - **细分领域分类**: 按产业链环节或技术路线分类
   - **公司对比矩阵**: 横向对比财务指标和估值
   - **投资选择建议**: 稳健/成长/弹性配置建议
   - 详细分析报告链接

**投资标的覆盖要求**（全景扫描策略）：

采用"全景扫描 + 拐点捕捉型龙头战法"：

**拐点捕捉型龙头战法**：
- 不仅关注市值最大的公司
- **重点关注细分冠军和拐点受益标的**
- 标注拐点逻辑（行业周期拐点、价格拐点、政策拐点、技术拐点）
- 每份报告在"业绩预期与估值"章节增加"拐点逻辑"标注

**公司分层与数量**：
- **小型行业**（15-25家总计）：
  - 第一梯队：3-5家龙头
  - 第二梯队：8-12家重要企业
  - 第三梯队：4-8家潜力企业

- **中型行业**（30-50家总计）：
  - 第一梯队：5-8家龙头
  - 第二梯队：15-25家重要企业
  - 第三梯队：10-17家潜力企业

- **大型行业**（100-150家总计）：
  - 第一梯队：10-15家龙头
  - 第二梯队：50-80家重要企业（按细分领域）
  - 第三梯队：40-55家潜力企业

**按细分领域组织**（大型行业必需）：
- 每个主要细分领域单独列出（如化工的农药、化纤、涂料等）
- 每个细分至少包含1-2家代表公司
- 龙头细分领域（营收占比>30%）包含5-10家公司

7. **投资逻辑与风险**
   - 行业投资价值
   - 关键风险因素

#### 步骤4: 保存行业报告

根据产业链归属保存到：
- `docs/[行业名称]/00_行业分析.md`（单一行业）
- `docs/[大类]/[细分领域]/00_行业分析.md`（需要细分的行业）

**示例**：
- 有色金属：`docs/有色金属/00_行业分析.md`
- 半导体设备：`docs/半导体/设备/00_行业分析.md`
- 锂电材料：`docs/化工/锂电材料/00_行业分析.md`

**文件编号规则**：
- 行业报告统一命名为 `00_行业分析.md`
- 00开头保证在文件列表中排序在最前面
- 公司分析文件直接使用公司名（如 `紫金矿业.md`）

#### 步骤5: 触发公司批量分析（自动）

行业报告生成后，自动执行公司批量分析。**默认采用全景扫描策略**。

**执行流程**：

1. **提取公司列表**
   - 从行业报告中提取所有列举的公司代码
   - 按细分领域和层级分类

2. **分批策略**（根据行业规模）

   **小型行业**（15-25家）：
   - 按层级分批
   - Batch 1-2: 龙头企业（每批3-5家）
   - Batch 3-4: 重要+潜力企业（每批5-8家）
   - 每批使用独立Task，适度并行（2-3个）

   **中型行业**（30-50家）：
   - 按细分领域分批
   - 每批10-15家公司
   - 最多并行3-4个批次

   **大型行业**（100-150家）⭐：
   - **按细分领域分批**（如：农药20家、化纤15家、涂料4家）
   - 每批20-25家公司
   - **最多并行5个批次**
   - **使用fast model加速**

3. **并行启动分析任务**
   - 使用 Task tool 创建多个并行分析任务
   - **大型行业必须使用 `model="fast"`**
   - 每个Task负责一个细分领域或一批公司

4. **生成公司分析报告**
   - 每个任务按照"一、公司分析"的标准流程执行
   - 保存到 `docs/[行业名称]/[细分领域]/[公司名称].md`
   - 使用标准的 `templates/company-template.md` 模板
   - **标注拐点逻辑**（在"业绩预期与估值"章节）

5. **更新行业报告链接**
   - 扫描生成的公司报告
   - 更新行业报告中的"详细分析"链接
   - 链接格式：`[📄 查看详情](./[细分领域]/[公司名称].md)`

**大型行业执行示例**（化工行业，120家）：
```
批次1：分析农药公司（20家）- fast model ✅
批次2：分析化纤公司（15家）- fast model ✅
批次3：分析化肥+涂料+橡胶（18家）- fast model ✅
批次4：分析塑料+精细化工（24家）- fast model ✅
批次5：分析无机化工+其他（25家）- fast model ✅

总计：102家公司，预计2小时完成
概念池更新：119家（核心标的55家）
```

**并行处理配置**：
- 小型行业：2-3个并行任务，常规model
- 中型行业：3-4个并行任务，常规model
- **大型行业：5个并行任务，fast model** ⭐
- 任务超时: 15分钟/公司
- 失败重试: 最多2次

**质量保证**：
- 每个批次完成后汇报进度
- 标注问题公司（ST、代码错误、业务剥离等）
- 在报告中使用 ⚠️ 符号标注风险
- 示例：
  - `⚠️ *ST退市风险`
  - `⚠️ 已剥离主营业务`
  - `⚠️ 代码对应其他公司`
- 最终统一更新概念池

**注意事项**：
- 注意API速率限制，必要时调整批次大小
- 记录失败的公司分析，便于后续补充
- 检查文件路径一致性，确保链接有效
- 大型行业分析完成后，向用户展示统计数据（总数、细分数、核心标的数）

#### 步骤6: 更新概念池（自动）

所有公司分析完成后，自动执行概念池更新：

**执行流程**：

1. **批量提取公司-概念关系**
   - 根据行业特点确定概念归属
   - 整理：股票代码、股票名称、细分领域、概念名称、核心/相关标的标记
   - 归属逻辑：基于公司分析报告中的主营业务和行业地位
   - 细分领域：提取主营业务（单一业务直接写，多业务用"+"连接）

2. **调用概念池更新流程**（参考"三、概念池体系更新"）
   - 判定核心/相关标的（基于营收占比、市占率、技术壁垒）
   - 批量添加股票到相应概念
   - 更新 `docs/概念股票池体系.md`（包含细分领域列）

3. **标记验证状态**
   - 所有自动添加的股票标记为"✅ 已验证"
   - 记录信息来源：行业分析报告+公司分析报告
   - 更新时间戳

**概念归属规则**：
- 如果行业对应单一概念（如"有色金属" → "有色金属"概念）
- 如果行业包含多个子概念（如"半导体设备" → "半导体"下的"设备"子概念）
- 优先使用现有概念树结构，避免创建重复概念

---

## 三、概念池体系更新

### 触发场景

- 完成公司分析后，发现公司应归入某概念
- 完成行业分析后，识别出龙头公司
- 用户明确要求更新概念池

### 更新工作流

#### 步骤1: 概念归属判定

基于分析结果判断：

**核心标的判定**（满足3项及以上）：
- 该业务营收占比 > 50%
- 市占率排名前3
- 拥有核心技术/专利壁垒
- 行业研报频繁提及为龙头

**相关标的判定**：
- 有该业务但非主营（占比 < 50%）
- 市占率排名靠后
- 转型中或布局中

#### 步骤2: 准备更新信息

整理：
- 股票代码、股票名称
- 细分领域（从公司主营业务提取）
- 归属概念（参考现有概念树）
- 核心/相关标的标记
- 归属逻辑（50字以内）
- 信息来源（至少2个）

#### 步骤3: 询问用户确认

**确认信息**：
```
基于分析结果，建议将以下股票加入概念池：

股票：[股票代码] [股票名称]
细分领域：[业务领域]（如"铜+黄金"、"稀土"）
概念：[概念名称]
类型：核心标的 / 相关标的
逻辑：[归属逻辑简述]
来源：[信息来源1]、[信息来源2]

是否确认更新？
[确认] / [修改] / [取消]
```

#### 步骤4: 更新文档

在 `docs/概念股票池体系.md` 对应板块中：

1. 找到对应概念章节
2. 在股票列表表格中添加新行
3. 填写：
   - 股票代码、股票名称
   - 标的类型（✅核心标的 / ⚪相关标的）
   - 归属逻辑
   - 信息来源
   - 验证状态（✅已验证）

**示例格式**：
```markdown
|| 股票代码 | 股票名称 | 细分领域 | 标的类型 | 归属逻辑 | 信息来源 | 验证状态 |
||---------|---------|---------|---------|---------|---------|---------|
|| 002230 | 科大讯飞 | AI语音+大模型 | ✅ 核心标的 | AI语音龙头，讯飞星火大模型国内前3，AIGC产品矩阵完整 | 官网+2025年报+中金研报 | ✅ 已验证 |
```
| 002230 | 科大讯飞 | ✅ 核心标的 | AI语音龙头，讯飞星火大模型国内前3，AIGC产品矩阵完整 | 官网+2025年报+中金研报 | ✅ 已验证 |
```

---

## 质量控制标准

### 分析报告质量要求

1. **数据准确性**
   - 所有数据必须注明来源和时间
   - 财务数据优先使用年报/季报官方数据
   - 市场数据注明查询日期

2. **分析完整性**
   - 财务数据要有对比（同比/环比/行业对比）
   - 投资观点要有逻辑支撑和数据支持
   - 风险提示要全面客观，不能只谈优点

3. **格式规范性**
   - 使用标准模板
   - 表格格式统一
   - 标题层级清晰

### 概念池更新质量要求

1. **必须经过用户确认**
2. **归属逻辑清晰**（50字以内，突出核心）
3. **信息来源明确**（至少2个可靠来源）
4. **符合验证标准**（参考概念股票池体系文档）

---

## 使用技巧

### 批量分析

当需要分析多个公司时：
```
用户："分析科大讯飞、商汤科技、寒武纪"
↓
逐个分析并生成报告，完成后汇总提示
```

### 深度vs快速分析

**深度分析**（推荐）：
- 完整的信息收集（30-60分钟）
- 详细的财务分析
- 全面的风险评估

**快速分析**（可选）：
- 用户明确要求快速了解
- 仅包含核心信息（主营、财务、估值）
- 标注为"快速分析版"

### 持续更新

已有分析文档的更新：
- 季报/年报发布后更新财务数据
- 重大事件发生时补充
- 文档头部更新"更新日期"

---

## 参考资料

**详细模板**：
- [公司分析模板](templates/company-template.md)
- [行业分析模板](templates/industry-template.md)

**参考指南**：
- [概念池更新指南](reference/concept-update.md) - 如何更新概念股票池体系
- [概念归属判定指南](reference/concept-mapping.md) - 如何判定公司应归属哪个概念

**信息来源**：
- [信息来源参考](reference/info-sources.md) - 完整的数据源列表和访问方法

**示例文档**：
- [分析示例](reference/examples.md) - 完整的公司和行业分析案例

---

## 注意事项

1. **免责声明**：所有分析仅供学习研究，不构成投资建议
2. **数据时效性**：注明数据获取时间，避免使用过时数据
3. **客观中立**：分析要客观，避免主观臆断
4. **风险提示**：必须包含风险分析，不能只谈优点
5. **Git管理**：所有文档变更通过Git管理，便于追溯
