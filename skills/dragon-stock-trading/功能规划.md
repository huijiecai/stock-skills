
## 按日数据采集流程设计

### Step 1：拉取指定日期涨停个股

每日脚本需要：

1. 拉取今日涨停股票列表

2. 对每只股票：

   * 若 stock_info 不存在 → 补充基础信息
   * 写入 stock_daily（行情数据）
   * 更新或生成 stock_events（如涨停、炸板等事件）

3. 计算并更新 market_sentiment：

   * 涨停数量
   * 连板数量
   * 跌停数量
   * 炸板率
   * 情绪周期判断（可后续扩展）

---

## 四、Skill 设计（智能分析能力）

需要设计一个分析类 Skill，具备以下能力：

### 股票概念分析 → 更新 stock_concept
分析逻辑：
1. 基于：股票名称和代码
2. 让 LLM 推断：
   * 所属概念
   * 是否为核心标的
   * 是否为龙头候选
3. 写入 stock_concept 表
扩展方向（第二阶段）：
* 拉取雪球
* 东方财富
* 同花顺概念数据
* 与 LLM 分析结果进行对比或增强

第一阶段：允许仅基于 LLM 推理生成概念归类。

---

## 五、concept_daily 生成逻辑

concept_daily 不应与股票数据采集混在一起。

它应是：

一个**独立脚本**，在以下条件满足后执行：

* 当日 stock_daily 数据完整
* stock_concept 数据完整
* 大盘数据已更新

计算逻辑包括：

* 每个概念的涨停数
* 平均涨幅
* 龙头强度
* 连板高度
* 赚钱效应
* 概念强度排序

---

## 六、concept_hierarchy 设计

需要支持：

* Web 可视化编辑
* 概念层级结构管理

  * 一级概念
  * 二级概念
  * 主题线
* 支持人工调整