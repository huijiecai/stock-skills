# 龙头战法理论

本文档详细说明龙头战法的核心理论、决策模型和实战模式。

> 弱水三千，只取一瓢  
> 慢就是快  
> 流水不争先，争的是滔滔不绝

---

## 核心思想

短线交易的本质不是预测市场，而是**管理预期**——从建立预期到兑现预期的闭环过程。

所有操作都围绕"**建立预期 → 买入（确认预期） → 卖出（预期兑现）**"展开。

市场不可预测，但**资金确认的预期节点**（如情绪冰点修复、龙头弱转强）具有最高确定性，因为市场已用真金白银投票验证，容错率大幅提升。

**永远敬畏市场，只做确定性最高的1-2个机会。**

---

## 预期管理四步法

### （1）建立预期：缩小范围，聚焦高概率机会

**筛选铁律（缺一不可）**：

#### ① 人气底线
- **要求**: 进入当日人气榜前30（按成交额排名）
- **原因**: 无关注度=无合力基础，资金无法形成共识标的
- **数据来源**: `service.get_stock_popularity_rank(date, 30)`

#### ② 逻辑正宗
- **要求**: 逻辑越硬，预期越持久；蹭热点易被证伪
- **判断**: 必须想明白炒作逻辑，逐条列出
- **数据来源**: `manager.get_stock_concepts(stock_code)` 查看概念归属

#### ③ 地位突出（三选一）
- **身位最高**: 连板数/趋势高度领先
- **领涨性强**: 率先涨停带动板块
- **PK胜出**: 分时强于同题材对手
- **数据来源**: `stock['streak_days']`、涨停时序分析

#### ④ 市场状态（只做两类机会）
- **冰点修复**: 昨日跌停>15家 + 连板高度≤2板 → 聚焦抗分歧标的
- **增量主升**: 指数放量 + 情绪高涨 → 只做身位龙
- **数据来源**: `service.get_market_status(date)`

---

### （2）买入（确认预期）：只在资金合力形成时介入

**核心原则**: 买入不是预判，而是确认。市场会发出"资金投票"信号。

**确认信号（必须同时满足）**：

#### 冰点修复确认
- **触发条件**:
  - 情绪冰点日（跌停>15家，连板≤2板）
  - 个股昨日抗住冰点分歧（板块大跌时仅微跌/红盘）
- **确认信号**:
  - 次日开盘不破昨日低点
  - 均线上方放量进攻
- **数据查询**: 对比前后两日的 `stock_daily` 数据

#### 龙头弱转强确认
- **触发条件**:
  - 龙头爆量分歧次日
  - 板块未大面积退潮，有活口存活
- **确认信号**:
  - 次日高开>3%
  - 30分钟内不破分时均线
  - 板块联动（其他个股跟随）
- **数据查询**: 查看 `change_percent`、概念内其他股票走势

#### 补涨分离确认
- **触发条件**:
  - 龙头断板当日
  - 补涨股主动走强（非被动跟风）
- **确认信号**:
  - 补涨股分时与龙头分离（龙头水下时逆势翻红/涨停）
  - 次日高开强承接
- **数据查询**: 对比龙头与补涨股的分时走势

---

### （3）卖出（预期兑现）：预期实现即离场

**核心原则**: 卖点取决于预期是否兑现，而非主观臆测。

**兑现信号**：

#### 通用止损
- 分时破均线，30分钟内无法快速拉回
- 原因: "该强不强即弱"

#### 主升行情
- 板块没有活口，承接不够
- 判断: 查看概念内其他股票是否全线走弱

#### 补涨行情
- 补涨走势无法强于龙头
- 补涨被证伪（龙头拉升时补涨跟不上）

---

### （4）复盘：验证预期，迭代认知

**每日必做**：
1. 检查自选股：哪些预期被确认？哪些被证伪？
2. 记录信号有效性：冰点修复/弱转强等模式是否触发？
3. 修正标准：如"人气前30"是否需调整为"前20"？

**关键问题**：
- "我的买入是否基于资金确认，而非主观幻想？"
- "卖出是否在预期兑现/证伪的节点？"

---

## 确定性最高模式：情绪拐点三板斧

### 为什么是拐点？

情绪冰点/高潮后的转折点，资金已用行动确认方向，确定性远高于主升期。

主升期鱼龙混杂，拐点后存活者=真龙。

---

### 模式1：冰点修复（新节点）

**触发条件**:
- 情绪冰点日：高位标的大批量负反馈，连板高度被压缩
- 个股抗分歧：分时均线上攻，或因情绪被被动走弱

**确认信号**:
- 次日开盘30分钟内：抗分歧股分时站稳均线 + 爆量拉升

**数据查询示例**:
```python
# 1. 判断是否冰点
market = service.get_market_status(yesterday)
is_ice_point = market['limit_down_count'] > 15 and market['max_streak'] <= 2

# 2. 找抗分歧股（昨日跌幅小或红盘）
yesterday_data = service.get_stock_with_concept(stock_code, yesterday)
today_data = service.get_stock_with_concept(stock_code, today)

# 3. 确认次日强承接
if today_data['open_price'] >= yesterday_data['low_price']:
    # 开盘不破昨日低点，确认强承接
```

**容错率**: ⭐⭐⭐⭐⭐（最高）

---

### 模式2：龙头弱转强（主线延续）

**触发条件**:
- 龙头爆量分歧日，当日承接强
- 板块未大面积退潮，有活口存活

**确认信号**:
- 次日高开>3%
- 30分钟内不破均线
- 板块联动（其他个股跟随上涨）

**数据查询示例**:
```python
# 1. 找出连板龙头
popularity = service.get_stock_popularity_rank(date, 30)
leaders = [s for s in popularity if s['streak_days'] >= 2]

# 2. 判断是否爆量分歧
yesterday_turnover = yesterday_data['turnover']
avg_turnover = sum(h['turnover'] for h in history[-5:]) / 5
is_huge_volume = yesterday_turnover > avg_turnover * 2

# 3. 次日确认高开
today_open_change = (today_data['open_price'] - yesterday_data['close_price']) / yesterday_data['close_price']
if today_open_change > 0.03:  # 高开3%
    # 确认弱转强
```

**容错率**: ⭐⭐⭐⭐

---

### 模式3：补涨分离（主线以补涨延续）

**触发条件**:
- 龙头断板当日
- 低位股或中位股主动走强（非被动跟风）

**确认信号**:
- 补涨股分时与龙头分离（龙头水下时补涨翻红）
- 次日高开强承接

**数据查询示例**:
```python
# 1. 找出概念内的龙头和补涨股
concept_stocks = manager.get_concept_stocks("商业航天")
leader = max(concept_stocks, key=lambda s: s['streak_days'])
followers = [s for s in concept_stocks if s['streak_days'] < leader['streak_days']]

# 2. 判断龙头是否断板
leader_data = service.get_stock_with_concept(leader['stock_code'], date)
if leader_data['is_limit_up'] == 0 and leader_data['change_percent'] < 0.05:
    # 龙头断板
    
# 3. 找出分离的补涨股
for follower in followers:
    follower_data = service.get_stock_with_concept(follower['stock_code'], date)
    if follower_data['change_percent'] > leader_data['change_percent']:
        # 补涨股强于龙头，发生分离
```

**容错率**: ⭐⭐⭐

---

### 模式4：机构趋势（逻辑为王）

**触发条件**:
- 逻辑非常正宗并且完全独立
- 要么有巨大的想象力难以被证伪，要么有业绩证明

**确认信号**:
- 缩量涨停（资金锁仓）
- 市场逐渐认可（龙虎榜、社区讨论）

**数据查询示例**:
```python
# 1. 检查逻辑正宗性
concepts = manager.get_stock_concepts(stock_code)
is_core = any(c['is_core'] == 1 for c in concepts)

# 2. 检查走势独立性
concept_stats = manager.get_concept_stats(concept_name, date)
# 如果概念内只有少数几只股票，说明逻辑独立

# 3. 检查缩量涨停
history = service.get_stock_history(stock_code, 5)
limit_up_days = [d for d in history if d['is_limit_up'] == 1]
if len(limit_up_days) >= 2:
    # 多日缩量涨停，资金锁仓
```

**容错率**: ⭐⭐⭐⭐⭐（但难度高，需要深度研究）

---

## 模式使用原则

### ✅ 只做确认点
- 冰点修复买**次日**
- 弱转强买**次日**
- 补涨分离买**次日**

### ✅ 容错率排序
```
冰点修复 > 龙头弱转强 > 补涨分离
```

### ❌ 绝对禁止
- 主升期追高（容错率低）
- 冰点当日博弈（不确定性高）
- 无分离的补涨（容易被龙头带崩）

---

## 实战执行时间表

### 早盘（8:30-9:30）
1. 扫描人气榜前30，剔除逻辑不硬、地位不高的标的
2. 判断市场状态：若昨日冰点→重点观察抗分歧股；若主升期→只盯身位龙

**数据查询**:
```python
# 判断市场状态
market_yesterday = service.get_market_status(yesterday)
market_today = service.get_market_status(today)

# 人气榜
popularity = service.get_stock_popularity_rank(today, 30)
```

### 盘中（9:30-10:30）
1. 等待确认信号：紧盯自选股分时（是否站稳均线？板块是否联动？）
2. 买入：信号出现后立即执行
3. 卖出：分时破均线/预期兑现即走

### 收盘复盘
1. 复盘：哪些预期被确认？哪些被证伪？
2. 修正：调整明日筛选标准
3. 核心问题：
   - "今天操作是否基于资金确认，而非主观幻想？"
   - "是否只做了情绪拐点的确认点？"

---

## 案例参考

详见 [examples.md](../examples.md) 中的实战案例：
- 恒宝科技（冰点修复）
- 红宝丽（冰点修复+突破）
- 国芳集团（弱转强+破异动）
- 联化科技（弱转强+破异动）
- 永安药业（补涨+冰点修复）
- 安妮股份（补涨+走势分离）
- 诺德股份（弱转强）
- 长城军工（冰点修复）
- 淳中科技（机构趋势）

---

## 关键原则总结

1. **只做确认，不做预测** - 等资金投票后再行动
2. **聚焦拐点，避开主升** - 拐点确定性最高
3. **严格止损，快速止盈** - 预期兑现即离场
4. **复盘迭代，持续优化** - 每日验证模型有效性

**记住**: 龙头战法不是预测未来，而是在市场确认的拐点上，跟随最聪明的资金行动。
