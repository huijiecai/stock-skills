# 逻辑库管理

本文档说明如何管理和更新逻辑库。

---

## 📁 逻辑库配置文件

**路径**：`.cursor/skills/longtou-strategy/logics.yaml`（相对于工作区根目录）

**更新频率**：
- 每周复盘时更新一次
- 重大题材出现时及时更新
- 市场主线切换时更新

---

## 📝 逻辑库配置示例

```yaml
逻辑库:
  - 名称: 影视传媒
    英文名: Media & Entertainment
    龙头股票: 横店影视
    龙头代码: "603103"
    
    炒作原因: 春节档电影票房创新高
    催化剂: 春节档票房数据、影视政策利好
    
    相关概念:
      - 影视动漫
      - 传媒
      - 电影
    
    受益股票:
      核心:
        横店影视: 院线龙头
        光线传媒: 电影发行龙头
      次核心:
        华策影视: 电视剧制作
    
    逻辑强度: 5  # 1-5星，4星以上才会筛选
    持续性: 1-2周
    驱动类型: 题材驱动
    
    推荐模式:
      - 龙头弱转强
      - 补涨分离
    
    风险提示: 题材炒作，注意板块退潮风险
```

---

## 🔄 更新逻辑库流程

### 自动分析方式（推荐）

用户说："更新逻辑库"时：

1. 自动调用 `MarketHotspotAnalyzer` 分析当前市场热点
2. 生成逻辑库更新建议（添加/更新/删除）
3. 询问用户确认
4. 使用 `StrReplace` 工具更新 `logics.yaml`

### 手动更新方式

1. **打开配置文件**：
   ```
   .cursor/skills/longtou-strategy/logics.yaml
   ```

2. **询问更新内容**：
   - 要添加新逻辑吗？（逻辑名称、龙头股票、炒作原因）
   - 要调整现有逻辑的强度吗？
   - 要删除已经结束的逻辑吗？

3. **生成YAML配置**：
   根据用户回答，生成YAML配置，并使用StrReplace工具更新文件

---

## ✅ 更新原则

### 添加新逻辑

**标准**：
- ✅ 有3+只涨停股票
- ✅ 有高连板龙头（≥3板）
- ✅ 题材清晰、逻辑正宗

**配置要点**：
- 相关概念：使用 **Tushare 概念名称**（不是自己编的）
- 逻辑强度：根据板块活跃度和持续性判断（5星=必做，4星=可做，3星=观察）
- 受益股票：明确核心和次核心，不要列太多

### 更新现有逻辑

**场景**：
- 📝 龙头换人（新龙头连板数更高）
- 📝 强度调整（板块热度变化）
- 📝 补充受益股（新股加入板块）

### 移除退潮逻辑

**标准**：
- 🗑️ 今日0只涨停，板块已完全退潮
- 🗑️ 逻辑已被证伪
- 🗑️ 强度降至3星以下且持续多日无起色

---

## 📋 配置字段说明

### 必填字段

| 字段 | 类型 | 说明 | 示例 |
|------|------|------|------|
| 名称 | 字符串 | 逻辑名称（简短） | "影视传媒" |
| 英文名 | 字符串 | 英文名称 | "Media & Entertainment" |
| 龙头股票 | 字符串 | 当前龙头名称 | "横店影视" |
| 龙头代码 | 字符串 | 股票代码（加引号） | "603103" |
| 炒作原因 | 字符串 | 为什么炒这个逻辑 | "春节档票房创新高" |
| 催化剂 | 字符串 | 触发事件 | "春节档数据、政策" |
| 相关概念 | 数组 | Tushare概念列表 | 见下方 |
| 受益股票 | 对象 | 核心/次核心股票 | 见下方 |
| 逻辑强度 | 数字 | 1-5星 | 5 |
| 持续性 | 字符串 | 预计持续时间 | "1-2周" |
| 驱动类型 | 字符串 | 驱动类型 | "题材驱动" |
| 推荐模式 | 数组 | 适用模式 | ["龙头弱转强"] |
| 风险提示 | 字符串 | 风险点 | "注意板块退潮" |

### 相关概念配置

**重要**：必须使用 Tushare Pro 的概念名称！

查询方式：
1. 到 Tushare Pro 官网查看概念列表
2. 或者从市场热点分析的"概念分析"结果中获取

```yaml
相关概念:
  - 影视动漫      # ✅ Tushare概念
  - 传媒          # ✅ Tushare概念
  - 电影          # ✅ Tushare概念
  - 影视娱乐      # ✅ Tushare概念
  # 不要用自己编的概念名！
```

### 受益股票配置

```yaml
受益股票:
  核心:
    横店影视: 院线龙头，7连板
    光线传媒: 电影发行龙头
  次核心:
    华策影视: 电视剧制作
    欢瑞世纪: 影视制作
```

---

## 🎯 逻辑强度评级标准

| 星级 | 涨停数 | 最高连板 | 持续性 | 操作建议 |
|------|--------|----------|--------|----------|
| ⭐⭐⭐⭐⭐ | ≥20只 | ≥5板 | 3天+ | 必做主线 |
| ⭐⭐⭐⭐ | 10-20只 | 3-5板 | 2天+ | 可做副线 |
| ⭐⭐⭐ | 5-10只 | 2-3板 | 1-2天 | 观察为主 |
| ⭐⭐ | <5只 | 1-2板 | 1天 | 不推荐 |

**筛选标准**：逻辑强度 ≥ 4星

---

## 📊 驱动类型说明

按确定性从高到低：

1. **政策驱动**：国家政策、法规变化（确定性最高，但容易证伪）
2. **业绩驱动**：业绩爆发、订单落地（持续性强，但炒作周期长）
3. **价格驱动**：商品涨价、供需变化（逻辑清晰，但波动大）
4. **题材驱动**：事件驱动、情绪炒作（爆发力强，但持续性差）

---

## ⚠️ 常见错误

### ❌ 概念名称错误

```yaml
# 错误：自己编的概念名
相关概念:
  - 电影票房概念  # ❌ Tushare没有这个概念
  - 春节档        # ❌ Tushare没有这个概念

# 正确：使用Tushare概念
相关概念:
  - 影视动漫      # ✅
  - 电影          # ✅
```

### ❌ 受益股过多

```yaml
# 错误：列了一堆股票
受益股票:
  核心:
    股票1: ...
    股票2: ...
    股票3: ...
    股票4: ...
    股票5: ...

# 正确：只列核心的2-3只
受益股票:
  核心:
    龙头股: 身位最高
    核心股: 逻辑最正宗
```

### ❌ 逻辑强度虚高

```yaml
# 错误：只有5只涨停就给5星
逻辑强度: 5  # ❌

# 正确：根据实际活跃度评级
逻辑强度: 3  # ✅ 观察级
```

---

## 📖 更多信息

- 查看 `output-format.md` 了解更新逻辑库时的输出格式
- 查看 `execution-guide.md` 了解如何执行市场热点分析
