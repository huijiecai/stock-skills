---
name: /longtou-strategy
id: longtou-strategy
category: stockTrading
description: 龙头战法超短线选股助手。基于"预期管理"理论，筛选符合龙头战法的A股股票。支持早盘筛选、逻辑分析、市场状态判断等功能。当用户需要选股、分析个股、或询问龙头战法相关问题时使用此 skill。
---

# 龙头战法选股助手

A股龙头超短战法智能选股工具，帮助识别高确定性的交易机会。

---

## 🎯 核心理念

**预期管理四步法**：建立预期 → 确认预期（买入） → 兑现预期（卖出） → 复盘

**只做确定性最高的机会**：
- 冰点修复（情绪冰点后的修复机会）
- 龙头弱转强（主线延续）
- 补涨分离（主线以补涨延续）
- 机构趋势（逻辑为王）

---

## 📋 使用方式

### 1. 早盘筛选今日自选股

**命令**：`/longtou-strategy 筛选今日自选股`

**说明**：
- 自动获取涨停榜、龙虎榜数据
- 筛选人气榜前30只股票
- 匹配当前热点逻辑
- 判断市场状态（冰点修复 or 增量主升）
- 输出符合条件的重点自选股

**输出示例**：
```
📊 市场状态：冰点修复
昨日跌停：18家 | 连板高度：2板
重点关注：冰点修复模式

🎯 今日重点自选股（3只）

1. 恒宝股份 (002104) ⭐⭐⭐⭐⭐
   - 连板：3板 | 首板：09:32
   - 逻辑：稳定币（政策驱动）
   - 炒作原因：央行推进数字人民币跨境支付
   - 地位：龙头（身位最高 | 逻辑龙头）
   - 推荐模式：龙头弱转强
   - 操作建议：次日高开>3%+站稳均线可介入
   - 风险提示：政策炒作，容易证伪，注意及时止盈

2. 淳中科技 (603516) ⭐⭐⭐⭐⭐
   - 连板：5板 | 首板：09:30
   - 逻辑：液冷散热（业绩驱动）
   - 炒作原因：英伟达GB300采用液冷散热
   - 地位：超级龙头（身位最高 | 逻辑龙头）
   - 推荐模式：机构趋势
   - 操作建议：未被证伪前可持有
   - 风险提示：关注业绩兑现情况

⚠️ 过滤掉18只股票（点击查看原因）
```

### 2. 分析特定股票

**命令**：`/longtou-strategy 分析 恒宝股份`

**说明**：
- 分析指定股票是否符合龙头战法
- 匹配逻辑库
- 判断地位和受益等级
- 给出操作建议

### 3. 查看当前逻辑库

**命令**：`/longtou-strategy 查看逻辑库`

**说明**：
- 显示当前关注的热点逻辑
- 逻辑强度、持续性、驱动类型
- 帮助理解当前市场在炒什么

### 4. 更新逻辑库（智能分析）

**命令**：`/longtou-strategy 更新逻辑库`

**说明**：
- 自动分析当前市场热点板块
- 统计涨停股票的板块和概念分布
- 生成逻辑库更新建议
- **清理退潮逻辑**：移除逻辑强度<4星或已无涨停活跃度的过时逻辑
- 引导你添加新的热点逻辑

**更新原则**：
- ✅ **添加**：有3+只涨停且有高连板（≥3板）的新热点
- 📝 **更新**：现有逻辑的龙头换人、强度调整
- 🗑️ **移除**：今日无涨停活跃度、或逻辑已证伪退潮的老题材

---

## 🔧 执行流程

当用户调用此 SKILL 时，按以下步骤执行：

### Step 1: 识别用户意图

```python
用户输入 -> 判断意图：
  - "筛选" / "选股" / "今日自选股" -> 执行早盘筛选
  - "分析" + 股票名称 -> 执行个股分析
  - "逻辑库" / "热点" / "查看逻辑" -> 查看逻辑库
  - "更新逻辑" / "市场热点" / "热点分析" -> 自动分析市场热点并建议更新
```

### Step 2: 执行核心功能

#### 2.1 早盘筛选（最常用）

```python
# 导入模块
import sys
sys.path.append('/Users/huijiecai/Project/stock/.cursor/skills/longtou-strategy')
from modules import LongtouScreener

# 执行筛选
screener = LongtouScreener()
result = screener.screen_stocks(
    top_n=30,              # 筛选人气榜前30只
    min_logic_strength=4   # 最小逻辑强度4星
)

# 格式化输出结果（见下方"输出格式"）
```

#### 2.2 个股分析

```python
# 获取股票概念
from modules import DataFetcher, LogicMatcher

fetcher = DataFetcher()
matcher = LogicMatcher()

# 获取概念并匹配逻辑
concepts = fetcher.get_stock_board_concept(stock_code)
logic = matcher.match_logic(concepts)

# 输出分析结果
```

#### 2.3 查看逻辑库

```python
from modules import LogicMatcher

matcher = LogicMatcher()
logics = matcher.get_all_logics()

# 格式化显示所有逻辑
```

#### 2.4 自动分析市场热点（新功能）

```python
from modules import MarketHotspotAnalyzer

analyzer = MarketHotspotAnalyzer()
result = analyzer.generate_logic_suggestion()

# 输出热点分析结果和逻辑库更新建议
```

### Step 3: 格式化输出

**早盘筛选输出格式**：

```markdown
## 📊 市场状态分析

- **状态**：{market_state['状态']}
- **说明**：{market_state['描述']}
- **昨日跌停**：{market_state['昨日跌停']} 家
- **连板高度**：最高 {market_state['连板高度']} 板
- **重点关注**：{', '.join(market_state['重点关注'])}

---

## 🎯 今日重点自选股（{len(selected_stocks)} 只）

{对每只股票，按以下格式输出}

---

**市场热点分析输出格式**（更新逻辑库时）：

```markdown
## 🔍 市场热点分析报告

**分析时间**：{分析时间}

### 📊 板块热度分析

当前最活跃的板块TOP5：

1. **文化传媒**
   - 涨停股票：40只
   - 最高连板：7板
   - 龙头股票：横店影视 (603103)
   - 代表股票：横店影视、欢瑞世纪、光线传媒...

2. **化学制品**
   - 涨停股票：17只
   - 最高连板：7板
   - 龙头股票：百川股份 (002455)
   - 代表股票：百川股份、吉华集团、圣泉集团...

...

### 📈 概念热度分析

当前最热门概念TOP10：

1. **影视娱乐**：7只股票
2. **知识产权保护**：4只股票
3. **动漫**：3只股票
...

---

## 💡 逻辑库更新建议

基于以上分析，建议对逻辑库进行以下操作：

### 🗑️ 清理退潮逻辑

需要移除以下无活跃度的逻辑：
- **XXX逻辑**：今日0只涨停，板块已退潮
- **YYY逻辑**：逻辑已被证伪，建议移除

### 📝 更新现有逻辑

**逻辑名称**：建议将龙头从XXX改为YYY（连板更高/身位更强）

### ✅ 添加新逻辑

### 建议1：文化传媒 ⭐⭐⭐⭐⭐

**推荐理由**：
- 板块活跃度最高（40只涨停）
- 有明确龙头（横店影视7连板）
- 题材清晰（春节档票房）

**配置建议**：
```yaml
- 名称: 文化传媒
  龙头股票: 横店影视
  龙头代码: "603103"
  炒作原因: 春节档电影票房创新高
  相关概念:
    - 影视娱乐
    - 影视动漫
    - 电影
  逻辑强度: 5
  持续性: 1-2周
  驱动类型: 题材驱动
```

{是否添加？(y/n)}

---

### 建议2：化学制品 ⭐⭐⭐⭐⭐

**推荐理由**：
- 17只股票涨停
- 有高位龙头（百川股份7连板）
- 板块活跃

**配置建议**：
```yaml
- 名称: 化学制品
  龙头股票: 百川股份
  龙头代码: "002455"
  炒作原因: 化工品价格上涨
  相关概念:
    - 化学制品
    - 化工
  逻辑强度: 5
  持续性: 1-2周
  驱动类型: 价格驱动
```

{是否添加？(y/n)}

---

**用户确认后，使用StrReplace工具更新 logic_library/current_logics.yaml 文件**
```

### {序号}. {股票名称} ({股票代码}) {逻辑强度星级}

**基本信息**
- 连板数：{连板数} 板
- 首板时间：{首板时间}
- 人气排名：#{排名}（在所有涨停股中）
- 龙虎榜：{'是' if 龙虎榜 else '否'}

**逻辑分析**
- 匹配逻辑：{逻辑名称}
- 炒作原因：{炒作原因}
- 催化剂：{催化剂}
- 持续性：{持续性}
- 驱动类型：{驱动类型}
- 逻辑强度：{逻辑强度星级}

**地位分析**
- 板块地位：{地位}
- 判断理由：{地位理由}
- 受益等级：{受益等级}（核心/次核心）

**操作建议**
- 推荐模式：{', '.join(推荐模式)}
- {根据模式给出具体操作建议}
- 风险提示：{风险提示}

---

{如果有过滤的股票}
## ⚠️ 过滤掉的股票（{len(filtered_stocks)} 只）

<details>
<summary>点击查看详情</summary>

{列出过滤掉的股票及原因}

</details>

---

**扫描时间**：{scan_time}
**数据来源**：东方财富（akshare）
```

---

## 📚 逻辑库管理

### 逻辑库配置文件

**路径**：`/Users/huijiecai/Project/stock/.cursor/skills/longtou-strategy/logic_library/current_logics.yaml`

**更新频率**：
- 每周复盘时更新一次
- 重大题材出现时及时更新
- 市场主线切换时更新

### 逻辑库配置示例

```yaml
逻辑库:
  - 名称: 稳定币
    龙头股票: 恒宝股份
    龙头代码: "002104"
    炒作原因: 央行推进数字人民币跨境支付
    催化剂: 央行政策、数字货币试点扩大
    相关概念:
      - 数字货币
      - 稳定币
      - 区块链
    受益股票:
      核心:
        恒宝股份: 硬件供应商，最正宗
      次核心:
        安妮股份: 版权保护
      蹭热点:
        - 某某科技
    逻辑强度: 5
    持续性: 3-5天
    驱动类型: 政策驱动
    推荐模式:
      - 龙头弱转强
      - 冰点修复
    风险提示: 政策炒作，容易证伪
```

### 如何更新逻辑库

当用户说"更新逻辑库"时，引导他：

1. **打开配置文件**：
   ```
   请打开文件：
   /Users/huijiecai/Project/stock/.cursor/skills/longtou-strategy/logic_library/current_logics.yaml
   ```

2. **询问更新内容**：
   - 要添加新逻辑吗？（逻辑名称、龙头股票、炒作原因）
   - 要调整现有逻辑的强度吗？
   - 要删除已经结束的逻辑吗？

3. **生成YAML配置**：
   根据用户回答，生成YAML配置，并使用StrReplace工具更新文件

---

## 🎓 战法知识库

### 筛选铁律（缺一不可）

1. **人气底线**：进入当日人气榜前30
2. **逻辑正宗**：匹配当前热点逻辑，逻辑强度≥4星
3. **地位突出**：三选一
   - 身位最高（连板数领先）
   - 领涨性强（率先涨停）
   - PK胜出（同题材中最强）
4. **市场状态**：只做两类机会
   - 冰点修复：昨日跌停>15家 + 连板≤2板
   - 增量主升：连板高度≥3板

### 确定性最高的四种模式

1. **冰点修复**（新节点）
   - 触发条件：情绪冰点 + 个股抗分歧
   - 确认信号：次日高开 + 站稳均线 + 爆量拉升

2. **龙头弱转强**（主线延续）
   - 触发条件：龙头爆量分歧 + 板块有活口
   - 确认信号：次日高开>3% + 30分钟不破均线

3. **补涨分离**（主线以补涨延续）
   - 触发条件：龙头断板 + 低位股主动走强
   - 确认信号：补涨股与龙头分离 + 次日强承接

4. **机构趋势**（逻辑为王）
   - 触发条件：逻辑独立且正宗 + 难以被证伪
   - 确认信号：缩量涨停 + 资金锁仓

### 卖出信号

- **通用止损**：分时破均线，30分钟内无法快速拉回
- **主升行情**：板块没有活口，承接不够
- **补涨行情**：补涨走势无法强于龙头

---

## 🛠️ 依赖安装

首次使用需要安装依赖：

```bash
pip install akshare pandas pyyaml
```

---

## 📝 使用说明

### 典型工作流程

**早盘（8:30-9:30）**
```
你：/longtou-strategy 筛选今日自选股

AI：[执行筛选，输出重点自选股]

你：分析一下恒宝股份

AI：[输出详细分析]
```

**盘中（9:30-10:30）**
- 目前需要手动盯盘，第二版会增加实时监控

**收盘后**
```
你：/longtou-strategy 更新逻辑库

AI：引导你更新逻辑库配置
```

---

## ⚠️ 重要提示

1. **逻辑库是核心**：每周更新逻辑库，确保逻辑库反映当前市场热点
2. **不是自动交易**：SKILL只提供筛选和分析，具体买卖需要你判断
3. **仅供参考**：所有分析仅供参考，不构成投资建议
4. **风险自负**：股市有风险，投资需谨慎

---

## 🔄 执行代码模板

当用户调用时，使用以下代码：

```python
import sys
sys.path.append('/Users/huijiecai/Project/stock/.cursor/skills/longtou-strategy')

from modules import LongtouScreener

# 执行筛选
screener = LongtouScreener()
result = screener.screen_stocks(top_n=30, min_logic_strength=4)

# 检查结果
if 'error' in result:
    print(f"❌ {result['error']}")
else:
    # 输出市场状态
    market_state = result['market_state']
    print(f"## 📊 市场状态分析\n")
    print(f"- **状态**：{market_state['状态']}")
    print(f"- **说明**：{market_state['描述']}")
    print(f"- **昨日跌停**：{market_state['昨日跌停']} 家")
    print(f"- **连板高度**：最高 {market_state['连板高度']} 板")
    print(f"- **重点关注**：{', '.join(market_state['重点关注'])}\n")
    
    # 输出自选股
    selected = result['selected_stocks']
    print(f"## 🎯 今日重点自选股（{len(selected)} 只）\n")
    
    for i, stock in enumerate(selected, 1):
        stars = "⭐" * stock['逻辑强度']
        print(f"### {i}. {stock['名称']} ({stock['代码']}) {stars}\n")
        print(f"**基本信息**")
        print(f"- 连板数：{stock['连板数']} 板")
        print(f"- 首板时间：{stock['首板时间']}")
        print(f"- 龙虎榜：{'是' if stock['龙虎榜'] else '否'}\n")
        print(f"**逻辑分析**")
        print(f"- 匹配逻辑：{stock['逻辑']}")
        print(f"- 炒作原因：{stock['炒作原因']}")
        print(f"- 持续性：{stock['持续性']}")
        print(f"- 驱动类型：{stock['驱动类型']}\n")
        print(f"**地位分析**")
        print(f"- 板块地位：{stock['地位']}")
        print(f"- 判断理由：{stock['地位理由']}")
        print(f"- 受益等级：{stock['受益等级']}\n")
        print(f"**操作建议**")
        print(f"- 推荐模式：{', '.join(stock['推荐模式'])}")
        print(f"- 风险提示：{stock['风险提示']}\n")
        print("---\n")
```

---

## 📖 参考文档

- 战法思路：`/Users/huijiecai/Project/stock/龙头战法/思路.md`
- 逻辑库配置：`logic_library/current_logics.yaml`
- 数据获取：`modules/data_fetcher.py`
- 逻辑匹配：`modules/logic_matcher.py`
- 筛选器：`modules/screener.py`
